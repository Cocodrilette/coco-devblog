---
name: "[ES][Tutorial] Como hacer una licencia de perreo intenso usando React y la API indexDB."
datePublished: "2022-07-10"
author: "Cocodrilette"
link: "https://github.com/Cocodrilette"
description: "Vamos hacer una aplicaci√≥n para aprender a manejar los estados de componentes en React, renderizado condicional, routing y CSS. Adem√°s vamos a usar la API IndexDB, para proveer a nuestra aplicaci√≥n con datos persistentes y relacionado exclusivamento con el dispositivo del usuario. Tamb√≠en vamos aprender a c√≥mo generar c√≥digos QR a partir de una URL provista por el usuario usando Javascript. Empecemos."
post_image: "./lautaro-andreani-UYsBCu9RP3Y-unsplash.jpg"
post_image_alt: "Programando una aplicaci√≥n en usando la librer√≠a React"
post_image_credit_text: "Lautaro Andreani"
post_image_credit_link: "https://unsplash.com/es/@lautaroandreani"
---
### [Ve el estado actual del proyecto en Github](https://github.com/Cocodrilette/licencia-de-perreo)
---
### [Aqui puedes ver una versi√≥n simplificada de esta p√°gina](http://simp.ly/p/QKkrFl)
---

## Antes de empezar

Una vez nos tomamos el tiempo para pensar lo que tenemos que hacer, podemos imaginar unos requisitos min√≠mos para nuestra aplicaci√≥n. Yo pens√© en que estos podr√≠an ser algunos

1. Debe ser personalizable.
2. Debe poder recibir los datos del usuario y hacer algo. Renderizarlos din√°micamente.
3. Se debe poder guardar o descartar una licencia.
4. La licencia debe tener un c√≥digo QR, integrado de manera... prodriamos decir,  espectacular,  para ver la licencia.
5. Debe haber un men√∫ para ver las licencias guardadas y poder borrarlas. Podr√≠amos dejar que se editaran, pero ser√≠a mejor estimular la conservaci√≥n. Haremos las dos para que podamos decidir c√≥mo queda mejor.
6. Podr√≠an guardarse con diferentes valores, sin repetir nombres para guardar licencias para compartir con los amigosüòé.
7. Podr√≠amos pedir el nickname del usuario, para personalizar la interfaz.
8. Usar los datos almacenados √∫nicamente para mostr√°rselos al usuario.

Ahora que tenemos unos requisitos m√≠nimos, solo podemos mejorar... mejor que improvisar. Todav√≠a no s√© como lo vamos hacer, pero empecemos a investigar.

## Prototipo

El otro d√≠a intent√© usar [Figma](https://www.figma.com/) para prototipar el projeto antes de empezar a programar nada. El resultado final, y lo que interaremos conseguir (y mejorar) en este tutorial, esto

![](https://i.imgur.com/trnvNMT.png)

## Empezando

*Te recomiendo familiarizarte con Javascript para que sigas este tutorial sindiendote m√°s comode. Te recomiendo el [curso completo de Javascript de MDN](https://developer.mozilla.org/es/docs/Learn/JavaScript/First_steps), o el curso de [freeCodeCamp](https://www.freecodecamp.org/learn/javascript-algorithms-and-data-structures/). Yo estoy aprendiendo con ellos. Tambi√©n te recomiendo conocer los conceptos b√°sicos de React (estados, JSX, componentes, propiedades, etc.). Puedes revisar la [introducci√≥n a React en MDN](https://developer.mozilla.org/es/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/React_getting_started) tambi√©n.*

Teniendo Node.js instalado en nuestro sistema, ejecutamos el comando `npx create-react-app` para crear el esqueleto de nuestra aplicaci√≥n. Una vez descargados e instalados todos los paquetes nos queda algo como esto

![Resultado del comando npx create-react-a¬¥¬¥](https://i.imgur.com/LV5hYY7.png)

> Los elementos marcados con [*] los borramos porque son elementos de la aplicaci√≥n inicial de React y no los necesitamos.

En la documentaci√≥n de `create-react-app` encontraras [informaci√≥n detallada sobre su funcionamiento](https://create-react-app.dev/).


En cuanto a nuestra aplicaci√≥n, as√≠ ser√° la distribuci√≥n del 

## 1. Directorio.

Teniendo como referencia la estrutura b√°sica. [Recordemos nuestro problemas](Antes de empezar). Nuestra aplicaci√≥n debe poder, 

1. Personalizar la licencia
2. Renderizar datos obtenidos de un formulario.
3. Guardar o descartar un formulario.
4. Recibir el c√≥digo QR de manera din√°mica seg√∫n la url proporcionada por el usuario.
5.  Mostrar las licencias guardadas y permitir editar o borrar.
6. Debe poder compartirse la licencia como url. 
7. -Aqui iba personalizar la interfaz con el nombre del usuario, pero lo descart√©-

Estuve probando algunas cosas y al final termin√© con algo as√≠, 

![Estructura del directorio](https://i.imgur.com/M9XOju3.png)

que creo que va a permitir navegar mejor entre archivos, y lo mejor de todo, nos va a permitir que el c√≥digo que escribamos, podamos usarlo en otras aplicaciones facilmente, y adem√°s nos va ayudar a cambiar el estilo de la licencia mientras el resto de la aplicaci√≥n permanece igual. No te procupes por lo que no veas, eso quiere decir que permance exactamente igual a como estaba antes.

Haremos algunos cambios, para manejar algunas partes de nuestra aplicaci√≥n como p√°ginas independientes. Para hacer esto tendremos primero que crear una barra de navegaci√≥n que nos permita movernos entre p√°ginas, resolviendo as√≠ el problema de 

## 2. La navegaci√≥n

Vamos a concentrarnos en nuestro componente *Navbar*, este ser√° el encargado de manejar las rutas. 

### a.

Nos ubicamos en nuestro archivo `src/components/navbar/navbar.js` e importamos lo que vamos a necesitar

![Importaciones del archivo](https://i.imgur.com/WX65TPj.png)

Como puedes ver (I) importamos React para poder usar JSX y componentes de clase. Importamos tambien el componente `Link` de la librer√≠a [React Router](https://reactrouter.com/) *(Para hacer eso, en la ra√≠z de nuestro directorio ejecutamos el comando `$ npm install react-router-dom@6`)*, para manejar la navegaci√≥n entre p√°ginas. Finalmente, importamos nuestro CSS.

Vamos a ver el c√≥digo.

### b.

![](https://i.imgur.com/Cwn2hpE.png)

Creamos nuestro componente de clase y preparamos su constructor para recibir sus propiedades. Esta propiedades van a ser los botones de navegaci√≥n, cada uno debe tener tambi√©n su funcionalidad. Veamos.

![](https://i.imgur.com/4iZSR8S.png)

Lo que estamos haciendo es crear nuestro array de botones, y cada uno le damos un (I) `name`, que nos servir√° para identificarlo luego, o para agregar un `<label>` HTML con el nombre de cada bot√≥n. Le damos un (II) `iconName`, para poder renderizar nuestros iconos usando la funcionalidad de Google Fonts, que nos permite hacerlo de esta forma

```
<span class="material-symbols-outlined">
    home
</span>
```
Tambi√©n le damos una propiedad `route` para poder usarla en nuestro componente `Link` (para poder usar este componente en nuestra aplicaci√≥n tendremos que instalar antes la librer√≠a. Por ultimo, la funci√≥n onClick, que terminar√° desapareciendo, por ahora nos ayudara a depurar nuestro c√≥digo. 
Ahora vamos a crear nuestra *Navbar*, 

### c.

![](https://i.imgur.com/WdZ92PB.png)

Lo que estamos haciendo aqui es crear una funci√≥n que contruya nuestra barra de navegaci√≥n. Dentro de la funcion creamos una constante `navItem`, en donde usamos el m√©todo [`.map()` de Javascript](https://developer.mozilla.org/es/docs/Web/JavaScript/Reference/Global_Objects/Array/map) para crear un contenedor para cada bot√≥n con su respectivo enlance. Nota c√≥mo usamos las propiedades de los botones que creamos anteriormente. Luego, nuestra funci√≥n `renderNavbar` crea un contenedor para todos los botones y los insertamos all√≠. Nuestro m√©todo `render()` devolver√° el resultado de nuestra funci√≥n, y finalemente, exportamos el componente. 

Hasta este punto, nuestra *Navbar* no funciona. Y esto es porque nos falta hacer un par de cosas antes. Veamos. 

### d.

Vamos a nuestro archivo `src/index.js` y lo madificamos para que se vea as√≠

![](https://i.imgur.com/dRcJUFm.png)

Los primeros dos *imports* resaltados corresponden a utilidades de la librer√≠a React Router. Lo dem√°s es nuestro CSS y los componentes de nuestra aplicaci√≥n (tambi√©n vemos la funcionalidad `reportWebVitals` que se crea por defecto con la aplicaci√≥n React, que nos ayuda a depurar nuestro c√≥digo). Entre las lineas 18 a 31 lo que estamos haciendo es (I) crear un componente `BrowserRouter` (lo que hace la libreria React Router es b√°sicamente manejar la URL del navegador, permitiendonos modificarla, por ejemplo). Luego, (II) creamos una ruta padre para nuestra `<App />`, as√≠ nuestra p√°gina de inicio ser√° por ejemplo `http://localhost:3000/`. (III) Dentro de nuestra ruta padre podemos insertar rutas hija que creamos dentro del directorio 'src/routes/' y que se ven asi,

![](https://i.imgur.com/c5SL0sw.png)

para lograr que las dem√°s p√°ginas tengan como ruta, por ejemplo `http://localhost:3000/saved` y as√≠ poder navegar entre una y otra (c√≥mo habras notado, la p√°gina *saved* es bastante sencilla. Por ahora todas las dem√°s se ven as√≠; lo unico que cambia es el contenido del `h1`, esto es para saber que nuestras rutas est√°n funcionando, luego le daremos el contenido final). (IV) Tambi√©n creamos una ruta especial 

```
<Route 
    path="*"
    element={<NotFound />}
/>
```

Que lo que hace es que cuando la ruta de nuestro navegador no coincida con ninguna de las que est√°n dentro del `BrowserRouter`, nos lleve a una p√°gina 404, que creamos dentro del directorio `src/`, y que se ve as√≠

![](https://i.imgur.com/LcIwejx.png)

### e.

Si pruebas darle click a los botones de la barra de navegaci√≥n, ver√°s que no funciona. Y esto es porque nos falta un componente fundamental que nos proporciona React Router para actualizar solo la parte de la interfaz que necesitamos, manteniendo el layout principal intacto, eliminando el parpadeo de la pantalla. Para hacer esto, vamos a nuestro `src/App.js` y lo modificamos para que se vea asi 

![](https://i.imgur.com/wwWVDJV.png)

Lo primero que hacemos es importar el componente, y todo lo dem√°s que ya sabemos. Y agregamos el componente encima y debajo de los dem√°s componente que tenga nuestra aplicaci√≥n. Piensa que todos los componentes que no sean el `<Outlet />` se mantendran iguales entre p√°ginas y cualquier p√°gina que que sea hija de nuestro componente `<App />` (recuerda nuestro *src/index.js*), se renderizar√° dentro del `<Outlet />`.

Ahora, si pruebas a navegar ver√°s que funciona, y la barra de navegaci√≥n se mantiene sin refrescar entre cambios de una p√°gina a otra.

Este tutorial no esta pensado para hablar en detalle sobre CSS, por eso el estilo es a tu gusto. Solo te recomiendo que cuando lo hagas pienses como hacerlo *responsive* desde el inicio. (Lo que yo hago es dise√±ar primero la "versi√≥n mobil" y luego la voy escalando a pantallas m√°s grande, donde todo cabe sin problemas). Puedes ver el que yo hice (provisionalmente) [aqui](https://github.com/Cocodrilette/licencia-de-perreo/blob/main/src/components/navbar/navbar.css), y copiarlo si quieres, recuerda que esto no afecta en nada a la l√≥gica de nuestra aplicac√≠on, pero es importante que nuestra aplicac√≠on sea usable. 

Mi *Navbar* se  ve asi en pantallas peque√±as

![](https://i.imgur.com/cMeD3rm.png)

y asi en pantallas grandes (escritorio)

![](https://i.imgur.com/XwRbdaR.png)

No te preocupes por como se ve ahora, poco a poco vamos a darle el estilo final.

## Creando nuestra primera licencia

*... este capitulo se est√° escribiendo ‚å®Ô∏è*