---
name: "[ES][Tutorial] Como hacer una licencia de perreo intenso usando React y la API indexDB."
datePublished: "2022-07-10"
author: "Cocodrilette"
link: "https://github.com/Cocodrilette"
description: "Vamos hacer una aplicaci칩n para aprender a manejar los estados de componentes en React, renderizado condicional, routing y CSS. Adem치s vamos a usar la API IndexDB, para proveer a nuestra aplicaci칩n con datos persistentes y relacionado exclusivamento con el dispositivo del usuario. Tamb칤en vamos aprender a c칩mo generar c칩digos QR a partir de una URL provista por el usuario usando Javascript. Empecemos."
post_image: "./lautaro-andreani-UYsBCu9RP3Y-unsplash.jpg"
post_image_alt: "Programando una aplicaci칩n en usando la librer칤a React"
post_image_credit_text: "Lautaro Andreani"
post_image_credit_link: "https://unsplash.com/es/@lautaroandreani"
---
### [Ve el estado actual del proyecto en Github](https://github.com/Cocodrilette/licencia-de-perreo)
---
### [Aqui puedes ver una versi칩n simplificada de esta p치gina](http://simp.ly/p/QKkrFl)
---

## Antes de empezar

Una vez nos tomamos el tiempo para pensar lo que tenemos que hacer, podemos imaginar unos requisitos min칤mos para nuestra aplicaci칩n. Yo pens칠 en que estos podr칤an ser algunos

1. Debe ser personalizable.
2. Debe poder recibir los datos del usuario y hacer algo. Renderizarlos din치micamente.
3. Se debe poder guardar o descartar una licencia.
4. La licencia debe tener un c칩digo QR, integrado de manera... prodriamos decir,  espectacular,  para ver la licencia.
5. Debe haber un men칰 para ver las licencias guardadas y poder borrarlas. Podr칤amos dejar que se editaran, pero ser칤a mejor estimular la conservaci칩n. Haremos las dos para que podamos decidir c칩mo queda mejor.
6. Podr칤an guardarse con diferentes valores, sin repetir nombres para guardar licencias para compartir con los amigos游땙.
7. Podr칤amos pedir el nickname del usuario, para personalizar la interfaz.
8. Usar los datos almacenados 칰nicamente para mostr치rselos al usuario.

Ahora que tenemos unos requisitos m칤nimos, solo podemos mejorar... mejor que improvisar. Todav칤a no s칠 como lo vamos hacer, pero empecemos a investigar.

## Prototipo

El otro d칤a intent칠 usar [Figma](https://www.figma.com/) para prototipar el projeto antes de empezar a programar nada. El resultado final, y lo que interaremos conseguir (y mejorar) en este tutorial, esto

![](https://i.imgur.com/trnvNMT.png)

## Empezando

*Te recomiendo familiarizarte con Javascript para que sigas este tutorial sindiendote m치s comode. Te recomiendo el [curso completo de Javascript de MDN](https://developer.mozilla.org/es/docs/Learn/JavaScript/First_steps), o el curso de [freeCodeCamp](https://www.freecodecamp.org/learn/javascript-algorithms-and-data-structures/). Yo estoy aprendiendo con ellos. Tambi칠n te recomiendo conocer los conceptos b치sicos de React (estados, JSX, componentes, propiedades, etc.). Puedes revisar la [introducci칩n a React en MDN](https://developer.mozilla.org/es/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/React_getting_started) tambi칠n.*

Teniendo Node.js instalado en nuestro sistema, ejecutamos el comando `npx create-react-app` para crear el esqueleto de nuestra aplicaci칩n. Una vez descargados e instalados todos los paquetes nos queda algo como esto

![Resultado del comando npx create-react-a췂췂](https://i.imgur.com/LV5hYY7.png)

> Los elementos marcados con [*] los borramos porque son elementos de la aplicaci칩n inicial de React y no los necesitamos.

En la documentaci칩n de `create-react-app` encontraras [informaci칩n detallada sobre su funcionamiento](https://create-react-app.dev/).


En cuanto a nuestra aplicaci칩n, as칤 ser치 la distribuci칩n del 

## 1. Directorio.

Teniendo como referencia la estrutura b치sica. [Recordemos nuestro problemas](Antes de empezar). Nuestra aplicaci칩n debe poder, 

1. Personalizar la licencia
2. Renderizar datos obtenidos de un formulario.
3. Guardar o descartar un formulario.
4. Recibir el c칩digo QR de manera din치mica seg칰n la url proporcionada por el usuario.
5.  Mostrar las licencias guardadas y permitir editar o borrar.
6. Debe poder compartirse la licencia como url. 
7. -Aqui iba personalizar la interfaz con el nombre del usuario, pero lo descart칠-

Estuve probando algunas cosas y al final termin칠 con algo as칤, 

![Estructura del directorio](https://i.imgur.com/M9XOju3.png)

que creo que va a permitir navegar mejor entre archivos, y lo mejor de todo, nos va a permitir que el c칩digo que escribamos, podamos usarlo en otras aplicaciones facilmente, y adem치s nos va ayudar a cambiar el estilo de la licencia mientras el resto de la aplicaci칩n permanece igual. No te procupes por lo que no veas, eso quiere decir que permance exactamente igual a como estaba antes.

Haremos algunos cambios, para manejar algunas partes de nuestra aplicaci칩n como p치ginas independientes. Para hacer esto tendremos primero que crear una barra de navegaci칩n que nos permita movernos entre p치ginas, resolviendo as칤 el problema de 

## 2. La navegaci칩n

Vamos a concentrarnos en nuestro componente *Navbar*, este ser치 el encargado de manejar las rutas. 

### a.

Nos ubicamos en nuestro archivo `src/components/navbar/navbar.js` e importamos lo que vamos a necesitar

![Importaciones del archivo](https://i.imgur.com/WX65TPj.png)

Como puedes ver (I) importamos React para poder usar JSX y componentes de clase. Importamos tambien el componente `Link` de la librer칤a [React Router](https://reactrouter.com/) *(Para hacer eso, en la ra칤z de nuestro directorio ejecutamos el comando `$ npm install react-router-dom@6`)*, para manejar la navegaci칩n entre p치ginas. Finalmente, importamos nuestro CSS.

Vamos a ver el c칩digo.

### b.

![](https://i.imgur.com/Cwn2hpE.png)

Creamos nuestro componente de clase y preparamos su constructor para recibir sus propiedades. Esta propiedades van a ser los botones de navegaci칩n, cada uno debe tener tambi칠n su funcionalidad. Veamos.

![](https://i.imgur.com/4iZSR8S.png)

Lo que estamos haciendo es crear nuestro array de botones, y cada uno le damos un (I) `name`, que nos servir치 para identificarlo luego, o para agregar un `<label>` HTML con el nombre de cada bot칩n. Le damos un (II) `iconName`, para poder renderizar nuestros iconos usando la funcionalidad de Google Fonts, que nos permite hacerlo de esta forma

```
<span class="material-symbols-outlined">
    home
</span>
```
Tambi칠n le damos una propiedad `route` para poder usarla en nuestro componente `Link` (para poder usar este componente en nuestra aplicaci칩n tendremos que instalar antes la librer칤a. Por ultimo, la funci칩n onClick, que terminar치 desapareciendo, por ahora nos ayudara a depurar nuestro c칩digo. 
Ahora vamos a crear nuestra *Navbar*, 

### c.

![](https://i.imgur.com/WdZ92PB.png)

Lo que estamos haciendo aqui es crear una funci칩n que contruya nuestra barra de navegaci칩n. Dentro de la funcion creamos una constante `navItem`, en donde usamos el m칠todo [`.map()` de Javascript](https://developer.mozilla.org/es/docs/Web/JavaScript/Reference/Global_Objects/Array/map) para crear un contenedor para cada bot칩n con su respectivo enlance. Nota c칩mo usamos las propiedades de los botones que creamos anteriormente. Luego, nuestra funci칩n `renderNavbar` crea un contenedor para todos los botones y los insertamos all칤. Nuestro m칠todo `render()` devolver치 el resultado de nuestra funci칩n, y finalemente, exportamos el componente. 

Hasta este punto, nuestra *Navbar* no funciona. Y esto es porque nos falta hacer un par de cosas antes. Veamos. 

### d.

Vamos a nuestro archivo `src/index.js` y lo madificamos para que se vea as칤

![](https://i.imgur.com/dRcJUFm.png)

Los primeros dos *imports* resaltados corresponden a utilidades de la librer칤a React Router. Lo dem치s es nuestro CSS y los componentes de nuestra aplicaci칩n (tambi칠n vemos la funcionalidad `reportWebVitals` que se crea por defecto con la aplicaci칩n React, que nos ayuda a depurar nuestro c칩digo). Entre las lineas 18 a 31 lo que estamos haciendo es (I) crear un componente `BrowserRouter` (lo que hace la libreria React Router es b치sicamente manejar la URL del navegador, permitiendonos modificarla, por ejemplo). Luego, (II) creamos una ruta padre para nuestra `<App />`, as칤 nuestra p치gina de inicio ser치 por ejemplo `http://localhost:3000/`. (III) Dentro de nuestra ruta padre podemos insertar rutas hija que creamos dentro del directorio 'src/routes/' y que se ven asi,

![](https://i.imgur.com/c5SL0sw.png)

para lograr que las dem치s p치ginas tengan como ruta, por ejemplo `http://localhost:3000/saved` y as칤 poder navegar entre una y otra (c칩mo habras notado, la p치gina *saved* es bastante sencilla. Por ahora todas las dem치s se ven as칤; lo unico que cambia es el contenido del `h1`, esto es para saber que nuestras rutas est치n funcionando, luego le daremos el contenido final). (IV) Tambi칠n creamos una ruta especial 

```
<Route 
    path="*"
    element={<NotFound />}
/>
```

Que lo que hace es que cuando la ruta de nuestro navegador no coincida con ninguna de las que est치n dentro del `BrowserRouter`, nos lleve a una p치gina 404, que creamos dentro del directorio `src/`, y que se ve as칤

![](https://i.imgur.com/LcIwejx.png)

### e.

Si pruebas darle click a los botones de la barra de navegaci칩n, ver치s que no funciona. Y esto es porque nos falta un componente fundamental que nos proporciona React Router para actualizar solo la parte de la interfaz que necesitamos, manteniendo el layout principal intacto, eliminando el parpadeo de la pantalla. Para hacer esto, vamos a nuestro `src/App.js` y lo modificamos para que se vea asi 

![](https://i.imgur.com/wwWVDJV.png)

Lo primero que hacemos es importar el componente, y todo lo dem치s que ya sabemos. Y agregamos el componente encima y debajo de los dem치s componente que tenga nuestra aplicaci칩n. Piensa que todos los componentes que no sean el `<Outlet />` se mantendran iguales entre p치ginas y cualquier p치gina que que sea hija de nuestro componente `<App />` (recuerda nuestro *src/index.js*), se renderizar치 dentro del `<Outlet />`.

Ahora, si pruebas a navegar ver치s que funciona, y la barra de navegaci칩n se mantiene sin refrescar entre cambios de una p치gina a otra.

Este tutorial no esta pensado para hablar en detalle sobre CSS, por eso el estilo es a tu gusto. Solo te recomiendo que cuando lo hagas pienses como hacerlo *responsive* desde el inicio. (Lo que yo hago es dise침ar primero la "versi칩n mobil" y luego la voy escalando a pantallas m치s grande, donde todo cabe sin problemas). Puedes ver el que yo hice (provisionalmente) [aqui](https://github.com/Cocodrilette/licencia-de-perreo/blob/main/src/components/navbar/navbar.css), y copiarlo si quieres, recuerda que esto no afecta en nada a la l칩gica de nuestra aplicac칤on, pero es importante que nuestra aplicac칤on sea usable. 

Mi *Navbar* se  ve asi en pantallas peque침as

![](https://i.imgur.com/cMeD3rm.png)

y asi en pantallas grandes (escritorio)

![](https://i.imgur.com/XwRbdaR.png)

No te preocupes por como se ve ahora, poco a poco vamos a darle el estilo final.

## Creando nuestra primera licencia


### Vengo a contarte una mala noticia. Todo lo que configuramos para paginar nuestra aplicaci칩n fue un error. Porque nos complica mucho el pasar props de esas p치ginas a su componente padre y que luego este se lo pase a otro componente hijo. Es un l칤o inmenso hacerlo de esta forma, y adem치s, no es necesario, porque podemos conseguir todas las funcionalidades que quer칤amos para nuestra aplicaci칩n sin ir por este camino. Lo que haremos entonces ser치 una aplicaci칩n de una sola p치gina. 

*...este cap칤tulo se sigue escribiendo... perd칩n por la demora游똂*